---
title: Lec8 - 调试理论与实践
icon: bug
categories:
  - 操作系统
tags:
  - 调试理论
---

> **背景回顾**：在快节奏的《操作系统》课中，插入一些 (重要得要命但与操作系统不完全相关的) 休闲内容。

**本讲内容**：调试理论：*Fault*, *Error* 和 *Failure*，以及我们应该如何应对程序里层出不穷的 bugs。

<!-- more --->

## 调试理论

如果我们已经知道 bug 的存在， **如何找到它** ？

### 摆正心态 - 调试两大公理

- 公理 1 : **机器永远是对的**
  - 因为机器是 **无情执行指令的客观存在**
  - 代码出现 bug 之后：
    - 99.99 % 是你编程层面的问题
    - 亿点点概率是编译器的错误优化 (但你可以知道)
    - 亿点点点点概率是硬件层面上的错误 (但你也可以知道)
- 公理 2 : **未测代码永远是错的**
  - 反复测试过的代码都有可能是错的
  - 我们 "默认" 不可能出现 bug 的地方，往往 bug 就在那里躺着
    - 并发 bug 的触发需要：**编译器 + 编译选项 + 特别的机器 + 特别的运气**

### 直面 *Fault*，*Error*，*Failure*

"软件" 这个词有两方面的含义：

- 人类需求在信息世界上的 **投影**
  - 需求分析错误 -> *bug*
- 计算过程中的 **精确数学描述**
  - 实现错误 -> *bug*

